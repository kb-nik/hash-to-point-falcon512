# HashToPoint & FalconDecompressor (Falcon‚Äë512)

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ —Å–º–∞—Ä—Ç‚Äë–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∫–≤–∞–Ω—Ç–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π Falcon‚Äë512 –≤ —Å–µ—Ç–∏ Ethereum:

1. **HashToPoint.sol** ‚Äì —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è ¬´—Ç–æ—á–∫–∏ —Ä–µ—à—ë—Ç–∫–∏¬ª –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è (Hash‚Äëto‚ÄëPoint) —Å —Ñ–∏–∫—Å–∞—Ü–∏–µ–π —Å–æ–ª–µ–π –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—ã–∑–æ–≤–æ–º `keccak256`.  
2. **FalconDecompressor.sol** ‚Äì —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ (Decompress), –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–µ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø–æ–ª–∏–Ω–æ–º–∞ –∏–∑ —Å–∂–∞—Ç–æ–≥–æ –±–∏—Ç–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

---

## üîç –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–µ—Ö–∞–Ω–∏–∑–º–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (Account Abstraction, ERC‚Äë4337) –ø—Ä–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∫–≤–∞–Ω—Ç–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π Falcon‚Äë512 –Ω–∞ Ethereum. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç:

- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω–∞–±–æ—Ä –ø–æ–ª–∏–Ω–æ–º–∏–∞–ª—å–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –ø–æ –º–æ–¥—É–ª—é `q`.  
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø–æ–¥–ø–∏—Å–∏ –∏–∑ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

---

## üì¶ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### HashToPoint.sol

- **`hash_to_point(uint256 q, uint256 n, string message) external view returns (uint256[] memory)`**  
  –§–æ—Ä–º–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ `n` —á–∏—Å–µ–ª –ø–æ –º–æ–¥—É–ª—é `q` –∏–∑ —Ö–µ—à–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.  
- **`shake(string message) private view returns (bytes memory)`**  
  –ü—Å–µ–≤–¥–æ‚Äë—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è SHAKE256 —á–µ—Ä–µ–∑ 64 –∏—Ç–µ—Ä–∞—Ü–∏–∏ `keccak256(salt[i] || message)` —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–æ–ª—å—é `SALTS[i]`.

**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**  
- –í–∞—Ä–∏–∞–Ω—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω: —Ä–∞—Å—Ö–æ–¥ –≥–∞–∑–∞ ‚âà‚ÄØ730‚ÄØ000 (–≤–µ—Ä—Å–∏—è‚ÄØ1) –∏ ‚âà‚ÄØ750‚ÄØ000 (–≤–µ—Ä—Å–∏—è‚ÄØ2) –≤–º–µ—Å—Ç–æ ‚âà‚ÄØ5‚ÄØ000‚ÄØ000 —É –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ zkNOX.  

### FalconDecompressor.sol

- **`decompress(bytes calldata data, uint256 n) external payable returns (int256[] memory)`**  
  –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç –±–∏—Ç–æ–≤—É—é —Å—Ç—Ä–æ–∫—É `data` –¥–ª–∏–Ω–æ–π ‚â•‚ÄØ`9¬∑n` –±–∏—Ç, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –º–∞—Å—Å–∏–≤ –∏–∑ `n` —Ü–µ–ª—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤:
  1. –ß—Ç–µ–Ω–∏–µ –±–∏—Ç–∞ –∑–Ω–∞–∫–∞;  
  2. –ß—Ç–µ–Ω–∏–µ 7 –º–ª–∞–¥—à–∏—Ö –±–∏—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è;  
  3. –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç–∞—Ä—à–∏—Ö –Ω—É–ª–µ–≤—ã—Ö –±–∏—Ç (k) –¥–æ –ø–µ—Ä–≤–æ–≥–æ –µ–¥–∏–Ω–∏—á–Ω–æ–≥–æ;  
  4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ `val = abs7 + (k << 7)`, —Å —É—á—ë—Ç–æ–º –∑–Ω–∞–∫–∞.  
  5. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –±–∏—Ç—ã –Ω—É–ª–µ–≤—ã–µ.  

**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**  
- –°—Ä–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥ –≥–∞–∑–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏‚âà‚ÄØ4‚ÄØ000‚ÄØ000.  

---

## ‚öôÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –§—É–Ω–∫—Ü–∏—è           | –í–∞—Ä–∏–∞–Ω—Ç      | –†–∞—Å—Ö–æ–¥ –≥–∞–∑–∞  |
|-------------------|--------------|-------------:|
| Hash-to-point     | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è‚ÄØ  |     ~750‚ÄØ000 |
| Decompress        | –ù–∞—à–∞ –≤–µ—Ä—Å–∏—è  |   ~4‚ÄØ000‚ÄØ000 |

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
git clone git@github.com:kb-nik/hash-to-point-falcon512.git
cd hash-to-point-falcon512

